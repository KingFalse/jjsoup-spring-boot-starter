package me.kagura.util;

import javax.swing.*;
import java.util.Base64;

public class CaptchaTool {

//    public static void main(String[] args) {
//        String base64 = "data:image/png;base64,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";
//        String captcha = CaptchaTool.show(base64);
//        System.err.println(captcha);
//    }

    public static String show(byte[] bytes) {
        ImageIcon ii = new ImageIcon(bytes);
        System.setProperty("java.awt.headless", "false");
        JFrame frame = new JFrame();
        frame.setAlwaysOnTop(true);
        return (String) JOptionPane.showInputDialog(null, null, "请输入验证码", JOptionPane.CANCEL_OPTION, ii, null, null);
    }

    public static String show(String base64) {
        base64 = (base64 == null ? "" : base64.replaceAll("data:image/.{1,4};base64,", ""));
        byte[] decode = Base64.getDecoder().decode(base64);
        return show(decode);
    }

    public static String show() {
        return show("");
    }
}